# MusicAssistant with Netease Cloud Music Provider
# 使用说明：
#   1. 将文件复制为 docker-compose.yml
#   2. 修改 volumes 中的路径为你的实际路径
#   3. 运行: docker-compose up -d

version: '3'

services:
  music-assistant:
    image: ghcr.io/music-assistant/server:latest
    # 如果使用自定义镜像（已安装依赖），取消下面的注释
    # image: music-assistant-custom:latest
    container_name: music-assistant
    restart: unless-stopped
    network_mode: host
    volumes:
      # MusicAssistant 数据目录（根据你的实际路径修改）
      - /path/to/ma/data:/data
      # MusicAssistant 媒体目录（根据你的实际路径修改）
      - /path/to/ma/media:/media
      # Netease Provider 代码目录（根据你的实际路径修改）
      # 注意：这里挂载的是 netease_provider 目录，不是整个项目目录
      - /path/to/ma_netease_cloud_music/netease_provider:/app/custom_components/netease_provider
    environment:
      - LOG_LEVEL=info

  # netease_cloud_music_api 服务（可选，如果还没有部署）
  netease-api:
    image: binaryify/netease_cloud_music_api
    container_name: netease-api
    restart: unless-stopped
    ports:
      - "3000:3000"
    # 如果使用 network_mode: host，可以注释掉 ports
    # network_mode: host

# 如果使用自定义 bridge 网络（不使用 network_mode: host），取消下面的注释
# networks:
#   default:
#     name: ma-network

